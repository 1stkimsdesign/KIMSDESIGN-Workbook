<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>🧠📘 디자인 문제집 (응용형)｜TheKimUniverse</title>
<meta name="description" content="디자인 용어 대백과(50개)를 기반으로 한 응용형 객관식 문제집" />
<style>
  :root{
    --bg:#ffffff; --fg:#0b0b0c; --muted:#6b7280; --line:#e5e7eb; --card:#f8fafc;
    --accent:#3b82f6; --accent2:#8b5cf6; --ok:#16a34a; --bad:#ef4444; --chip:#eef2ff;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%}
  body{background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,Apple SD Gothic Neo,Pretendard,Roboto,Helvetica,Arial}
  header{position:sticky;top:0;z-index:40;background:rgba(255,255,255,.75);backdrop-filter:saturate(1.05) blur(8px);border-bottom:1px solid var(--line)}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  .top{display:flex;align-items:center;justify-content:space-between;gap:16px}
  .brand{font-weight:900;letter-spacing:.2px;display:flex;align-items:center;gap:12px}
  .badge{font-size:12px;color:#334155;border:1px solid var(--line);padding:4px 8px;border-radius:999px;background:var(--chip)}
  h2{margin:0 0 10px 0}
  p{margin:8px 0}
  .muted{color:var(--muted)}
  .grid{display:grid;gap:12px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px}
  .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:18px;margin-top:16px}
  @media (max-width: 920px){ .hero{grid-template-columns:1fr} }
  .btn{padding:10px 14px;border:1px solid var(--line);background:linear-gradient(180deg,#ffffff,#f3f4f6);color:var(--fg);border-radius:12px;cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,#93c5fd,#60a5fa);color:#0b0b0c;font-weight:800;border-color:transparent}
  .btn[disabled]{opacity:.5;pointer-events:none}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  select{padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#fff;color:var(--fg)}
  .qnum{font-size:13px;color:var(--muted)}
  .prog{height:10px;border:1px solid var(--line);border-radius:999px;overflow:hidden;background:#fff}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent2),#22d3ee)}
  .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:var(--chip);font-size:13px;color:#334155}
  .stem{font-size:19px;line-height:1.65}
  .opts{display:grid;gap:10px;margin-top:12px}
  .opt{display:flex;gap:10px;align-items:flex-start;padding:14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
  .opt input{margin-top:3px}
  .tag{color:var(--muted);font-size:12px}
  .score{font-size:34px;font-weight:900}
  .chip{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:var(--chip);font-size:13px}
  .cards{display:grid;gap:12px}
  .result-card{display:flex;gap:12px;align-items:flex-start;border:1px solid var(--line);border-radius:14px;padding:14px;background:#fff}
  .ico{width:32px;height:32px;border-radius:10px;display:grid;place-items:center}
  .ico.ok{background:rgba(22,163,74,.15);color:#16a34a}
  .ico.bad{background:rgba(239,68,68,.15);color:#ef4444}
  .explain{margin-top:8px;padding:10px 12px;border:1px dashed #bae6fd;background:#f0f9ff;border-radius:12px;color:#075985;font-size:13px}
  footer{margin:28px 0 8px;text-align:center;color:var(--muted);font-size:12px}
</style>
</head>
<body>
<header>
  <div class="wrap top">
    <div class="brand">🧠📘 <span>디자인 문제집 (응용형)</span>
      <span class="badge">조형 원리 · 색채 · 타이포그래피 · 무드 · 워크플로우 · 기타</span>
    </div>
  </div>
</header>

<div class="wrap">
  <!-- 시작 화면 -->
  <section id="screen-start" class="grid">
    <div class="hero">
      <div class="card">
        <h2>소개</h2>
        <p>**디자인 용어 대백과(50개)**에서만 출제되는 응용형 객관식 문제들이야.</p>
        <ul class="muted" style="margin:8px 0 0 16px;line-height:1.7">
          <li>카테고리: 조형 원리 · 색채 · 타이포그래피 · 무드 · 워크플로우 · 기타</li>
          <li>객관식 4지선다, 마지막에 <b>일괄 채점</b></li>
          <li>오답은 카드로 정리되어 <b>리뷰</b> 가능</li>
        </ul>
      </div>
      <div class="card">
        <h2>설정</h2>
        <div class="row">
          <label>문항 수</label>
          <select id="count">
            <option value="10" selected>10문제</option>
            <option value="20">20문제</option>
            <option value="30">30문제</option>
          </select>
          <button class="btn primary" id="btn-start">시작하기 ▶</button>
        </div>
        <p class="muted" style="margin-top:8px">매 시작마다 문제·보기 순서가 무작위로 섞여.</p>
      </div>
    </div>
  </section>

  <!-- 퀴즈 화면 -->
  <section id="screen-quiz" class="grid" style="display:none">
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <div class="qnum" id="qnum">1 / 10</div>
        <div class="pill"><span id="miniAnswers">응답 0</span><span class="tag" id="miniCat"></span></div>
      </div>
      <div class="prog"><div class="bar" id="bar"></div></div>
    </div>

    <div class="card">
      <div class="stem" id="stem">문제가 들어갑니다</div>
      <div class="tag" id="hint" style="margin-top:6px"></div>
      <div class="opts" id="opts"></div>
      <div class="row" style="margin-top:12px;justify-content:flex-end">
        <button class="btn" id="btn-prev">◀ 이전</button>
        <button class="btn primary" id="btn-next">다음 ▶</button>
      </div>
    </div>
  </section>

  <!-- 결과 화면 -->
  <section id="screen-result" class="grid" style="display:none">
    <div class="card">
      <h2>결과</h2>
      <p>총 <b id="totalQ">10</b>문항 중 <b id="rightQ">0</b>개 정답</p>
      <div class="score" id="scorePct">0%</div>
      <div class="row" style="margin-top:10px">
        <span class="chip">정답률 90%+ 우수 · 70%+ 양호 · 70% 미만 복습 권장</span>
        <button class="btn" id="btn-restart">다시 시작</button>
      </div>
    </div>

    <div class="card" id="wrongBox" style="display:none">
      <h3 style="margin:0 0 8px 0">오답 카드</h3>
      <div class="cards" id="wrongCards"></div>
    </div>

    <div class="card" id="allBox">
      <h3 style="margin:0 0 8px 0">전체 문항 리뷰</h3>
      <div class="cards" id="allCards"></div>
    </div>
  </section>
</div>

<footer>
  ※ 본 페이지는 김씨네디자인실의 자체 제작 콘텐츠로, 무단 복제 및 배포를 금합니다.
</footer>

<script>
/* ============================== 
   데이터: 용어 대백과 50개만 활용
   변경: '마진' 삭제 → '정렬'로 대체, '픽토그램' 삭제 → 'CI/BI 세부'로 대체
================================= */
const Q = [
  /* 조형 원리 */
  {id:"gp-grid-role",cat:"조형 원리",stem:"다음 중 ‘그리드(Grid)’의 목적과 가장 거리가 먼 것은?",
   options:["정보의 정렬과 일관성","시각적 위계 확보","유지보수와 확장성 향상","임의의 장식 요소 추가"],answer:3,
   explain:"그리드는 장식이 아니라 구조·정렬·위계를 위한 체계야."},
  {id:"gp-gutter",cat:"조형 원리",stem:"‘거터(Gutter)’의 역할로 알맞은 것은?",
   options:["페이지 바깥 여백","열/행 사이 호흡과 분리를 만드는 간격","이미지 해상도 보정","색 공간 변환"],answer:1,
   explain:"거터는 블록 사이 간격으로 가독성과 리듬을 만든다."},
  {id:"gp-hierarchy",cat:"조형 원리",stem:"다음 중 ‘시각적 위계(Visual Hierarchy)’를 강화하는 행동은?",
   options:["모든 텍스트를 같은 크기로","여백과 대비로 묶음/분리를 만든다","제목의 크기를 본문보다 작게","모든 색을 동일 명도로"],answer:1,
   explain:"여백·크기·명도 대비가 위계를 만든다."},
  {id:"gp-alignment",cat:"조형 원리",stem:"‘정렬(Alignment)’의 원칙으로 옳지 않은 것은?",
   options:["요소를 기준선에 맞춰 일관성 있게 배치한다","좌·우·중앙 정렬을 혼합해 통일성을 높인다","관련 없는 요소끼리 멀리 떨어뜨린다","텍스트는 그리드에 맞추어 정렬한다"],answer:1,
   explain:"정렬은 혼합보다는 일관된 기준을 지켜야 통일성이 생긴다."},
  {id:"gp-white",cat:"조형 원리",stem:"‘화이트 스페이스(여백)’을 늘렸을 때 기대하기 어려운 효과는?",
   options:["콘텐츠 집중도 상승","묶음/분리 명확화","정보 밀도 상승으로 읽기 어려움","차분하고 고급스러운 인상"],answer:2,
   explain:"여백을 늘리면 정보 밀도는 낮아져 읽기 쉬워진다."},
  {id:"gp-modular",cat:"조형 원리",stem:"‘모듈러 그리드’의 장점은?",
   options:["복잡한 데이터도 규칙적으로 배치 가능","색각 보정 자동화","해상도 자동 업샘플링","폰트 파일 최적화"],answer:0,
   explain:"열+행 격자를 활용해 다양한 패턴을 안정적으로 배치한다."},
  {id:"gp-colrow",cat:"조형 원리",stem:"다음 설명 중 ‘컬럼(Column)’과 가장 관련이 깊은 것은?",
   options:["가로 방향 구획","세로 방향 구획","픽셀 격자","색 공간"],answer:1,
   explain:"컬럼은 세로 구획, 로우(Row)는 가로 구획."},

  /* 색채 */
  {id:"cl-analogous",cat:"색채",stem:"‘유사색(Analogous)’ 배색의 특징은?",
   options:["색상환에서 마주보는 색","같은 색상에서 명도/채도만 다름","서로 이웃한 색으로 구성","정삼각형 위치의 세 색"],answer:2,
   explain:"이웃한 색이라 조화롭지만 대비는 약하다."},
  {id:"cl-complementary",cat:"색채",stem:"보색 대비를 쓸 때의 실전 가이드는?",
   options:["항상 50:50 비율","한 색을 주색, 다른 색은 포인트로","둘 다 고채도로 최대한 강하게","항상 그라디언트로"],answer:1,
   explain:"비율 차이를 둬야 충돌을 완화하고 안정적이야."},
  {id:"cl-split",cat:"색채",stem:"‘분할 보색(Split-Complementary)’을 고른 것은?",
   options:["보색의 양옆 색 + 기준색","정삼각형 간격의 세 색","같은 색상 명도만 변주","두 쌍의 보색"],answer:0,
   explain:"보색의 좌우 색을 사용해 대비와 안정성을 함께 얻는다."},
  {id:"cl-triadic",cat:"색채",stem:"‘삼각 배색(Triadic)’의 장점은?",
   options:["대비는 약하고 안정적","세 방향 균형감과 활기가 좋다","항상 파스텔만 가능","웹 접근성에 불리"],answer:1,
   explain:"120° 간격 세 색은 균형과 생동감을 준다."},
  {id:"cl-tetradic",cat:"색채",stem:"‘테트라드’ 배색을 UI에 쓸 때 올바른 접근은?",
   options:["네 색을 균등 비율로 사용","역할 기반(주·보조·강조·경고)으로 분담","항상 흑백 배경만","항상 고채도"],answer:1,
   explain:"역할을 나눠야 운영/접근성/유지보수가 용이하다."},
  {id:"cl-mono",cat:"색채",stem:"‘모노크롬(단색)’의 장점으로 보기 어려운 것은?",
   options:["브랜드 일관성 강화","집중도 상승","감정 스펙트럼의 복잡한 혼합 전달","운영이 단순"],answer:2,
   explain:"단색은 메시지가 선명하지만 감정 혼합 표현엔 한계."},
  {id:"cl-keycolor",cat:"색채",stem:"‘키 컬러(Key Color)’의 설명으로 옳은 것은?",
   options:["캠페인 중앙 이미지","브랜드를 대표하는 핵심 색상","디지털 전용 색공간","인쇄 잉크 농도"],answer:1,
   explain:"브랜드 정체성을 즉시 연상시키는 대표 색상."},
  {id:"cl-contrast",cat:"색채",stem:"‘색상 대비(Color Contrast)’를 높이는 올바른 방법은?",
   options:["명도/채도 차이를 키운다","같은 명도에서 색상만 바꾼다","폰트만 얇게 한다","이미지를 래스터로 바꾼다"],answer:0,
   explain:"명도(밝기) 대비가 특히 가독성에 직접적."},

  /* 타이포그래피 */
  {id:"ty-body",cat:"타이포그래피",stem:"한글/영문 혼용 본문에서 안전한 선택은?",
   options:["디스플레이 서체를 본문에 사용","가변폭 본문서체 + 적절한 리딩","모든 텍스트를 대문자","자간 –50으로"],answer:1,
   explain:"본문은 가독성 중심의 가변폭 서체와 충분한 리딩이 핵심."},
  {id:"ty-display-warn",cat:"타이포그래피",stem:"‘디스플레이 서체’를 피해야 하는 상황은?",
   options:["큰 제목의 포인트","짧은 카피","본문 전체","영화 포스터 헤드라인"],answer:2,
   explain:"디스플레이 서체는 장문 본문 가독성에 부적합."},
  {id:"ty-kerning",cat:"타이포그래피",stem:"‘커닝(Kerning)’은 무엇을 조정하나?",
   options:["문장 전체 자간","줄과 줄 사이 간격","특정 글자쌍 간격","폰트 파일 크기"],answer:2,
   explain:"Tracking=문장 자간, Leading=줄간격, Kerning=글자쌍 간격."},
  {id:"ty-tracking",cat:"타이포그래피",stem:"‘트래킹(Tracking)’의 적절한 설명은?",
   options:["전체 자간을 일괄 조정","특정 글자쌍 간격","줄간격 조정","폰트 힌팅"],answer:0,
   explain:"문장/단락 전체의 자간을 한 번에 조정한다."},
  {id:"ty-leading",cat:"타이포그래피",stem:"‘리딩(Leading)’이 너무 좁으면 생기는 문제는?",
   options:["행간 충돌로 가독성 저하","헤드라인만 선명","색각 이상 개선","파일 용량 증가"],answer:0,
   explain:"줄과 줄이 겹쳐 읽기 리듬이 무너진다."},
  {id:"ty-serif-sans",cat:"타이포그래피",stem:"산세리프의 일반적 장점은?",
   options:["저해상도 스크린에서 명료함","장식적 디테일 풍부","캘리그래피 분위기","인쇄에서만 가독성 우수"],answer:0,
   explain:"스크린에서의 명료성과 현대적 인상이 강점."},
  {id:"ty-legibility",cat:"타이포그래피",stem:"‘가독성(Legibility)’ 향상을 위한 방법으로 맞는 것은?",
   options:["자간을 과도하게 줄인다","명도 대비를 높인다","폰트를 무조건 얇게","모든 글을 대문자"],answer:1,
   explain:"명도 대비·적절한 자간/리딩이 핵심."},

  /* 무드 */
  {id:"md-brutal",cat:"무드",stem:"‘브루탈리즘’ 웹 스타일에서 보기 어려운 요소는?",
   options:["거친 타이포와 원색 대비","시스템 기본 UI 그대로 노출","완벽한 규칙성·정교한 여백 그리드","거친 그래픽 요소"],answer:2,
   explain:"브루탈리즘은 규칙성보다 날 것의 에너지에 초점."},
  {id:"md-bauhaus",cat:"무드",stem:"‘바우하우스’ 정신과 가장 거리가 먼 것은?",
   options:["기능이 형태를 규정","장식 최소화와 합리성","산업적 제작·표준화","과도한 장식과 비합리성"],answer:3,
   explain:"바우하우스는 기능주의·합리주의를 지향한다."},
  {id:"md-modern",cat:"무드",stem:"‘모더니즘’의 키워드로 적절한 것은?",
   options:["장식 배제·질서·보편성","패스티시·아이러니","콜라주·차용","네온 사이버 무드"],answer:0,
   explain:"모던은 절제와 질서, 보편성을 지향."},
  {id:"md-retro",cat:"무드",stem:"‘레트로’에서 보기 어려운 요소는?",
   options:["복고풍 서체/질감","세피아·뉴트럴 톤","비비드 네온 그라디언트","인쇄 거칠기 효과"],answer:2,
   explain:"네온 그라디언트는 Y2K/사이버 무드에 가깝다."},
  {id:"md-pop",cat:"무드",stem:"‘팝 아트’의 상징적 표현법은?",
   options:["벤데이 닷과 대중문화 차용","수공예적 캘리그래피","브루탈리즘 테두리","뉴모피즘 음영"],answer:0,
   explain:"벤데이 닷·상업 이미지 차용이 대표적."},
  {id:"md-neumo",cat:"무드",stem:"‘뉴모피즘’ UI의 핵심은?",
   options:["강한 하드 섀도와 날카로운 테두리","부드러운 내/외광으로 만든 미세 입체감","완전 평면 단색만","픽셀아트 질감"],answer:1,
   explain:"소프트한 음영으로 돌출/내몰림을 표현."},

  /* 워크플로우 */
  {id:"wf-wireframe",cat:"워크플로우",stem:"‘와이어프레임’ 단계에서 적절하지 않은 결정은?",
   options:["정보 구조 점검","CTA 배치 탐색","최종 일러스트 스타일 확정","사용자 흐름 검토"],answer:2,
   explain:"와이어프레임은 구조 설계 단계야."},
  {id:"wf-safezone",cat:"워크플로우",stem:"배너 제작 시 ‘세이프 존’의 핵심 목적은?",
   options:["색각 이상자를 위한 대비 보정","플랫폼별 잘림/오차 대비","파일 용량 축소","폰트 힌팅"],answer:1,
   explain:"핵심 내용이 잘리지 않도록 내부 안전 영역을 확보."},
  {id:"wf-ppi",cat:"워크플로우",stem:"해상도(PPI/DPI)에 대한 올바른 설명은?",
   options:["PPI는 주로 화면, DPI는 인쇄 문맥에서 쓴다","PPI만 높이면 웹 이미지가 무조건 선명","벡터는 해상도 개념에서 자유롭다(스케일 독립)","둘 다 픽셀 수와 무관"],answer:0,
   explain:"웹 선명도는 원본 픽셀 수/배치 크기에 좌우되고, 벡터는 해상도 독립."},
  {id:"wf-vector",cat:"워크플로우",stem:"아이콘/로고 제작에 적합한 그래픽은?",
   options:["래스터: 확대해도 선명","벡터: 해상도 독립, 스케일에 유리","둘 다 동일","항상 JPG만"],answer:1,
   explain:"스케일 변동이 심해도 품질 유지가 쉬운 벡터가 적합."},
  {id:"wf-grid-collab",cat:"워크플로우",stem:"팀 협업에서 ‘모듈러 그리드’를 쓰는 가장 실무적인 이유는?",
   options:["파일 용량을 줄이기 위해","반복 제작의 일관성과 속도를 높이기 위해","인쇄 잉크를 절감하기 위해","색 공간을 자동 변환하기 위해"],answer:1,
   explain:"그리드를 기준으로 컴포넌트·템플릿을 재사용해 속도와 일관성이 크게 오른다."},
  {id:"wf-contrast-ui",cat:"워크플로우",stem:"웹 UI에서 본문 가독성을 높이기 위한 ‘기본’ 전략은?",
   options:["색상만 바꾸고 명도 대비는 같게 유지","명도 대비와 충분한 리딩을 확보","폰트를 무조건 가장 얇게","모든 텍스트를 대문자"],answer:1,
   explain:"명도 대비(색상 대비)와 적절한 리딩이 가독성의 기초다."},
  {id:"wf-cta",cat:"워크플로우",stem:"CTA 문구로 더 직접적인 것은?",
   options:["더 알아보기","지금 다운로드","살펴볼까요?","생각만 해보기"],answer:1,
   explain:"행동을 즉시 지시하는 동사가 전환에 유리."},

  /* 기타 */
  {id:"ot-logos",cat:"기타",stem:"‘워드마크(Wordmark)’ 설명으로 올바른 것은?",
   options:["그림/아이콘 형태의 로고","문자 형태로 만든 로고","기업/브랜드 정체성 전체 체계","캠페인 대표 이미지"],answer:1,
   explain:"문자(브랜드명) 자체를 로고로 디자인한 유형."},
  {id:"ot-symbol",cat:"기타",stem:"‘심볼마크(Symbol)’에 해당하는 것은?",
   options:["문자 로고","그림/아이콘 형태의 로고","색상 가이드","인쇄 가이드"],answer:1,
   explain:"문자 대신 상징(아이콘) 중심의 로고."},
  {id:"ot-cibi",cat:"기타",stem:"‘CI/BI’ 가이드에서 가장 우선 관리할 항목은?",
   options:["로고 오용 사례, 세이프 존, 최소 크기, 키 컬러","폰트 힌팅","개발 이슈 템플릿","모니터 해상도"],answer:0,
   explain:"브랜드 자산 보호의 핵심은 로고·컬러·세이프존·최소크기·오용 규정."},
  {id:"ot-keyvisual",cat:"기타",stem:"‘키 비주얼(Key Visual)’의 역할은?",
   options:["캠페인의 중심 이미지를 제공","서체 파일 포맷을 규정","색 공간(RGB/CMYK) 변환을 수행","문단 스타일 가이드만 제공"],answer:0,
   explain:"키 비주얼은 캠페인/브랜드 메시지를 응축한 대표 시각 요소다."},
  {id:"ot-inforg",cat:"기타",stem:"‘인포그래픽’이 상대적으로 부적합한 목적은?",
   options:["데이터·정보의 시각 구조화","핵심 지표의 빠른 이해","복잡한 법률 문서의 정식 효력 대체","요약된 메시지 전달"],answer:2,
   explain:"인포그래픽은 이해·요약에 강점이지만, 법률 효력을 대체하진 못한다."},
  {id:"ot-cidetail",cat:"기타",stem:"‘CI/BI’ 세부 항목 중 브랜드 보호에 직접적 관련이 적은 것은?",
   options:["로고 최소 크기 규정","색상 사용 규정","슬로건 문구 카피라이트 문장 자체","세이프 존 규정"],answer:2,
   explain:"슬로건 문장 자체는 법적 보호와 연관되지만 시각 가이드 세부 규정과는 별개다."},
  {id:"ot-rgbcmyk",cat:"기타",stem:"RGB/CMYK에 대한 설명으로 옳은 것은?",
   options:["RGB는 인쇄, CMYK는 모니터","RGB는 가산혼합, CMYK는 감산혼합","둘 다 동일 색역","둘 다 화면에서만 사용"],answer:1,
   explain:"RGB는 빛의 삼원색(가산), CMYK는 잉크(감산) 기반."},
  {id:"ot-wordmarkSymbol",cat:"기타",stem:"다음 중 ‘로고타입(Logotype)’ 설명으로 맞는 것은?",
   options:["문자 형태의 로고(워드마크)와 같다","항상 심볼과 세트","이미지 해상도 규칙","캠페인 비주얼"],answer:0,
   explain:"로고타입=워드마크(문자 기반 로고)."}
];

/* ===== 유틸 ===== */
const $ = s => document.querySelector(s);
const shuffle = arr => { const a=[...arr]; for(let i=a.length-1;i>0;i--){ const j=(Math.random()*(i+1))|0; [a[i],a[j]]=[a[j],a[i]]; } return a; };
const sample = (arr,n)=>shuffle(arr).slice(0,n);

/* ===== 상태 ===== */
let quiz=[], idx=0, picks=[], answers=[];

/* ===== 시작 ===== */
function startQuiz(){
  const n = parseInt($('#count').value,10);
  const chosen = sample(Q, Math.min(n, Q.length));
  quiz = chosen.map(q=>{
    const options = shuffle(q.options);
    const answer = options.indexOf(q.options[q.answer]);
    return {...q, options, answer};
  });
  idx=0; picks = Array(quiz.length).fill(null); answers = quiz.map(q=>q.answer);
  $('#screen-start').style.display='none';
  $('#screen-result').style.display='none';
  $('#screen-quiz').style.display='';
  renderQ();
}

/* ===== 렌더 ===== */
function renderQ(){
  const q = quiz[idx];
  $('#qnum').textContent = `${idx+1} / ${quiz.length}`;
  $('#miniCat').textContent = `#${q.cat}`;
  $('#stem').textContent = q.stem;
  $('#hint').textContent = q.hint ? `힌트: ${q.hint}` : '';
  $('#bar').style.width = `${(idx/quiz.length)*100}%`;
  $('#miniAnswers').textContent = `응답 ${picks.filter(v=>v!==null).length}`;

  const opts = $('#opts'); opts.innerHTML='';
  q.options.forEach((label,i)=>{
    const wrap=document.createElement('label'); wrap.className='opt';
    const input=document.createElement('input'); input.type='radio'; input.name='opt';
    input.checked = (picks[idx]===i);
    input.onchange=()=>{ picks[idx]=i; $('#miniAnswers').textContent = `응답 ${picks.filter(v=>v!==null).length}`; };
    const span=document.createElement('div'); span.innerHTML = `<b>${label}</b>`;
    wrap.appendChild(input); wrap.appendChild(span); opts.appendChild(wrap);
  });

  $('#btn-prev').disabled=(idx===0);
  $('#btn-next').textContent=(idx===quiz.length-1)?'채점 ▶':'다음 ▶';
}

/* ===== 네비게이션 ===== */
$('#btn-prev').onclick=()=>{ if(idx>0){ idx--; renderQ(); } };
$('#btn-next').onclick=()=>{ if(idx<quiz.length-1){ idx++; renderQ(); } else finish(); };
$('#btn-start').onclick=startQuiz;

/* ===== 채점/결과 ===== */
function finish(){
  $('#screen-quiz').style.display='none';
  $('#screen-result').style.display='';

  const total = quiz.length;
  let right = 0;
  const wrongIdxs = [];
  picks.forEach((p,i)=>{ if(p===answers[i]) right++; else wrongIdxs.push(i); });

  $('#rightQ').textContent = right;
  $('#totalQ').textContent = total;
  $('#scorePct').textContent = `${Math.round((right/total)*100)}%`;

  // 오답 카드
  const wrongBox = $('#wrongBox'), wrongCards = $('#wrongCards');
  wrongCards.innerHTML='';
  wrongBox.style.display = wrongIdxs.length ? '' : 'none';

  wrongIdxs.forEach(i=>{
    const q = quiz[i]; const my = picks[i]===null ? '미응답' : q.options[picks[i]];
    const card = document.createElement('div'); card.className='result-card';
    card.innerHTML = `
      <div class="ico bad">✖</div>
      <div>
        <div class="tag">Q${i+1} · #${q.cat}</div>
        <div style="font-size:17px;margin:6px 0 8px">${q.stem}</div>
        <div>정답: <b style="color:var(--ok)">✅ ${q.options[q.answer]}</b></div>
        ${q.explain ? `<div class="explain">💡 <b>해설</b> — ${q.explain}</div>` : ''}
        <div class="tag" style="margin-top:6px">내 선택: ${my}</div>
      </div>`;
    wrongCards.appendChild(card);
  });

  // 전체 리뷰
  const allCards = $('#allCards'); allCards.innerHTML='';
  quiz.forEach((q,i)=>{
    const ok = (picks[i]===answers[i]);
    const my = picks[i]===null ? '미응답' : q.options[picks[i]];
    const card = document.createElement('div'); card.className='result-card';
    card.innerHTML = `
      <div class="ico ${ok?'ok':'bad'}">${ok?'✔':'✖'}</div>
      <div>
        <div class="tag">Q${i+1} · #${q.cat}</div>
        <div style="font-size:17px;margin:6px 0 8px">${q.stem}</div>
        <div>정답: <b>${q.options[q.answer]}</b></div>
        ${q.explain ? `<div class="explain">📝 <b>해설</b> — ${q.explain}</div>` : ''}
        <div class="tag" style="margin-top:6px">내 선택: ${my}</div>
      </div>`;
    allCards.appendChild(card);
  });
}

/* ===== 다시 시작 ===== */
$('#btn-restart').onclick=()=>{
  $('#screen-result').style.display='none';
  $('#screen-start').style.display='';
};
</script>
</body>
</html>
